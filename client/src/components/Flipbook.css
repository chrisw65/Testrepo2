.viewer {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.75rem;
  padding: clamp(1.75rem, 2.5vw + 1.25rem, 3.5rem);
  border-radius: 32px;
  background: rgba(15, 23, 42, 0.55);
  box-shadow: 0 32px 68px rgba(2, 6, 23, 0.48);
  backdrop-filter: blur(18px);
  color: #e2e8f0;
  width: min(94vw, 1280px);
}

.viewer__book {
  --page-aspect: 1.414;
  --page-width: clamp(320px, 38vw, 520px);
  --page-height: calc(var(--page-width) * var(--page-aspect));
  position: relative;
  width: calc(var(--page-width) * 2 + 7rem);
  height: calc(var(--page-height) + 5.5rem);
  padding: 2.75rem 3.5rem;
  border-radius: 36px;
  background: radial-gradient(circle at 18% 18%, rgba(15, 118, 110, 0.38), transparent 58%),
    radial-gradient(circle at 82% 22%, rgba(14, 165, 233, 0.28), transparent 64%),
    linear-gradient(140deg, rgba(15, 23, 42, 0.92), rgba(2, 6, 23, 0.94));
  box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.12), 0 46px 96px rgba(2, 6, 23, 0.55);
  perspective: 2400px;
}

.book__page {
  position: absolute;
  top: 2.75rem;
  width: var(--page-width);
  height: var(--page-height);
  border-radius: 16px;
  background: #f8fafc;
  overflow: hidden;
  box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.08);
  transform-style: preserve-3d;
}

.book__page--left {
  left: 3.5rem;
  box-shadow: inset 12px 0 18px rgba(15, 23, 42, 0.12), inset 0 0 0 1px rgba(15, 23, 42, 0.08);
}

.book__page--right {
  left: calc(var(--page-width) + 3.5rem);
  box-shadow: inset -12px 0 18px rgba(15, 23, 42, 0.12), inset 0 0 0 1px rgba(15, 23, 42, 0.08);
}

.book__page--incoming {
  filter: brightness(0.98);
}

.book__page--turning {
  top: 2.75rem;
  left: 3.5rem;
  width: var(--page-width);
  height: var(--page-height);
  transform-style: preserve-3d;
  z-index: 10;
}

.book__page--right.book__page--turning {
  left: calc(var(--page-width) + 3.5rem);
}

.book__page--turning.book__page--left {
  transform-origin: right center;
}

.book__page--turning.book__page--right {
  transform-origin: left center;
}

.page-face {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  overflow: hidden;
  display: block;
}

.page-face--back {
  transform: rotateY(180deg);
}

.page-face__content {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.page-face__image,
.page-face__texture {
  position: absolute;
  inset: 0;
}

.page-face__image {
  background-position: center;
  background-size: contain;
  background-repeat: no-repeat;
  background-color: #f8fafc;
  filter: contrast(1.02) brightness(1.01);
}

.page-face__texture {
  pointer-events: none;
  mix-blend-mode: multiply;
  opacity: 0.18;
  background-size: 320px;
  background-repeat: repeat;
  transition: opacity 180ms ease;
}

.page-face__placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: rgba(15, 23, 42, 0.55);
  background: repeating-linear-gradient(
      90deg,
      rgba(15, 23, 42, 0.08),
      rgba(15, 23, 42, 0.08) 2px,
      transparent 2px,
      transparent 20px
    ),
    #f8fafc;
}

.page-face__sheen,
.page-face__shadow {
  position: absolute;
  inset: 0;
  pointer-events: none;
  transition: opacity 160ms ease, transform 160ms ease;
}

.page-face__sheen {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.55) 28%,
    rgba(255, 255, 255, 0.1) 72%,
    rgba(255, 255, 255, 0) 100%
  );
  opacity: 0.18;
}

.page-face__shadow {
  background: linear-gradient(
    90deg,
    rgba(15, 23, 42, 0.7) 0%,
    rgba(15, 23, 42, 0.55) 30%,
    rgba(15, 23, 42, 0.08) 78%,
    rgba(15, 23, 42, 0) 100%
  );
  opacity: 0.32;
}

.viewer--texture-smooth .page-face__texture {
  opacity: 0.08;
  background-image: radial-gradient(circle at 15% 20%, rgba(148, 163, 184, 0.18), transparent 60%),
    radial-gradient(circle at 80% 80%, rgba(226, 232, 240, 0.12), transparent 65%);
  background-size: 280px, 320px;
}

.viewer--texture-linen .page-face__texture {
  opacity: 0.24;
  background-image: linear-gradient(90deg, rgba(71, 85, 105, 0.15) 2px, transparent 2px),
    linear-gradient(rgba(71, 85, 105, 0.1) 2px, transparent 2px);
  background-size: 140px 4px, 4px 140px;
}

.viewer--texture-recycled .page-face__texture {
  opacity: 0.28;
  background-image: radial-gradient(rgba(15, 23, 42, 0.18) 15%, transparent 16%),
    radial-gradient(rgba(148, 163, 184, 0.14) 12%, transparent 13%),
    radial-gradient(rgba(15, 23, 42, 0.12) 10%, transparent 11%);
  background-position: 0 0, 40px 60px, 80px 20px;
  background-size: 120px 120px;
}

.viewer--texture-canvas .page-face__texture {
  opacity: 0.22;
  background-image: linear-gradient(135deg, rgba(30, 41, 59, 0.18) 15%, transparent 40%),
    linear-gradient(45deg, rgba(71, 85, 105, 0.12) 10%, transparent 35%);
  background-size: 26px 26px, 32px 32px;
}

.viewer__controls {
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 0.95rem;
  font-weight: 500;
}

.viewer__controls button {
  appearance: none;
  border: none;
  border-radius: 999px;
  padding: 0.65rem 1.3rem;
  background: linear-gradient(135deg, #14b8a6, #0ea5e9);
  color: #0b1120;
  font-weight: 600;
  letter-spacing: 0.02em;
  cursor: pointer;
  box-shadow: 0 12px 24px rgba(13, 148, 136, 0.35);
  transition: transform 160ms ease, box-shadow 160ms ease, filter 160ms ease;
}

.viewer__controls button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 16px 28px rgba(14, 165, 233, 0.35);
  filter: brightness(1.05);
}

.viewer__controls button:disabled {
  cursor: not-allowed;
  opacity: 0.55;
  box-shadow: none;
  filter: saturate(0.65);
}

.viewer__progress {
  min-width: 180px;
  text-align: center;
  color: rgba(226, 232, 240, 0.9);
}

@media (max-width: 860px) {
  .viewer {
    width: min(96vw, 820px);
    padding: clamp(1.25rem, 2.5vw + 1rem, 2.5rem);
  }

  .viewer__book {
    --page-width: clamp(220px, 48vw, 360px);
    width: calc(var(--page-width) * 2 + 4.5rem);
    height: calc(var(--page-height) + 4.5rem);
    padding: 2.25rem;
  }

  .book__page {
    top: 2.25rem;
  }

  .book__page--left {
    left: 2.25rem;
  }

  .book__page--right {
    left: calc(var(--page-width) + 2.25rem);
  }

  .book__page--turning {
    top: 2.25rem;
    left: 2.25rem;
  }

  .book__page--right.book__page--turning {
    left: calc(var(--page-width) + 2.25rem);
  }
}
